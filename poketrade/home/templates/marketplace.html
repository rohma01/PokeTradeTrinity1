{% extends "base.html" %}

{% block content %}
<h1 class="text-3xl font-bold mb-6 text-center">Marketplace</h1>

<!-- Search & Filter -->
<form method="get" class="mb-8 flex justify-center gap-4">
    <input type="text" name="search" placeholder="Search PokÃ©mon" value="{{ request.GET.search }}" class="border p-2 rounded w-1/3">
    <select name="type" class="border p-2 rounded">
        <option value="">All Types</option>
        <option value="fire">Fire</option>
        <option value="water">Water</option>
        <option value="grass">Grass</option>
        <option value="electric">Electric</option>
        <option value="psychic">Psychic</option>
        <!-- Add more types as needed -->
    </select>
    <button type="submit" class="bg-red-500 text-white px-4 py-2 rounded">Search</button>
</form>

<!-- PokÃ©mon Listings -->
<ul class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
{% for pokemon in pokemon_data %}
    <li class="border p-4 rounded shadow bg-white flex flex-col items-center">
        <img src="{{ pokemon.sprite }}" alt="{{ pokemon.name }}" class="w-24 h-24 mb-2">
        <h2 class="text-xl font-semibold mb-1">{{ pokemon.name }}</h2>
        <p class="mb-1 text-gray-600">Types: {{ pokemon.types|join:", " }}</p>
        <p class="mb-2 font-bold">Price: ðŸª™ {{ pokemon.price }}</p>
        <form method="post" action="{% url 'buy_pokemon' pokemon.listing_id %}">
            {% csrf_token %}
            <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded">Buy</button>
        </form>
    </li>
{% empty %}
    <p class="col-span-full text-center text-gray-700">No PokÃ©mon listed for sale.</p>
{% endfor %}
</ul>
{% endblock %}
